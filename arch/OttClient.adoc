= OpenOTT 终端说明 
:toc: macro
:toc-title: 目录
:toclevels: 3
:sectnums:
:imagesdir: ./imgs

toc::[]

== 变更说明


|=======================
|版本|作者     |日期|说明
|v0.1    |Victor     |2017-04-5 |init
|=======================


== 系统构成
.终端构成系统部件及规范
[uml, global-client-components,png]
--

node "终端构成系统部件及规范" {
    [android 5.0]
    [加密]
    [boot]
    [OTA]-OTA规范
    [app 管理]-App管理规范
    [Video Player]
    [fs]-FS规范
    [bluez]
    [usb hid driver]
    [Input]-()"Input 规范"
    [*wifi client]
    [*wifi route]
    [setup app]
    [lanucher app]
    [Indent]-()"indent 规范"
}

--

.终端系统构成
[uml, global-clientarch,png]
--

 ()"消息接口"
 [API 代理]
 ()"HTML5网页"
 ()"HLS视频"
 ()"流化输入接口"
 ()"流化视频流"
node "OTT终端" {
  
   node "操作系统" 
   [操作系统]-->[系统服务]
   node "系统服务" {
         ()"本机服务接口"
        [消息服务]<-->()"本机服务接口"
        [本机应用管理服务]<-->()"本机服务接口"
        [启动(升级)服务]<-->()"本机服务接口"
        [本机设置服务]<-->()"本机服务接口"
        
    }
  
    node "应用"{

        node "默认应用"{
            [视频播放器]
            [应用浏览器]
            [应用浏览器]-->()"HLS链接"
            ()"HLS链接"-->[视频播放器]
        }    
        [消息服务应用]
        [本机设置应用]
        [流化应用]
        [视频播放器]-->[应用浏览器]
  
  
        HLS视频<..[视频播放器]
        HTML5网页<..[应用浏览器]
        
        ()"流化输入接口"<..[流化应用]
        ()"流化视频流"-->[流化应用]
        
        ()"本机服务接口"<..>[本机设置应用]
        ()"本机服务接口"<..> [消息服务应用]
        
       
        ()"本机服务接口" <..>[应用浏览器]
        ()"本机服务接口" <..>[流化应用]
        
        
        [应用浏览器]-->[用户UI]
        [消息服务应用]-->[用户UI]
        [本机设置应用]-->[用户UI]
        [流化应用]-->[用户UI]
    
    }
   
        
    
    
    [应用浏览器].0).>[API 代理]
    [消息服务]<..>()"消息接口"
}
--

== 系统说明

=== 应用浏览器
为保证用户体验一致，与内容运营的统一性，OTT终端使用应用浏览器作为用户交互界面的主要部件，并采用HTML5作为主要界面开发的基础。因此应用浏览器应符合HTML5、WebGL、WebRTC、WebAudio、HLS等标准。建议采用Chrome 43以上版本。

1. 应用浏览器应提供JS API记录当前URL访问记录。
1. 应用浏览器应提供URL页面缓存功能。
1. Andriod应用浏览器应提供访问开机启动相关媒体文件的功能


==== 视频播放器
视频播放器主要用于配合应用浏览器播放视频，因此其应支持HLS、RTSP、Mpeg2 TS UDP等标准。同时应能够提供符合HTML5 Media Elements 访问API。Android系统建议采用 https://github.com/google/ExoPlayer[EXOPlayer]

==== 本机设置应用
本机设置应用，主要提供设置硬件（软件）的各项设置，可参照Android原生设置应用，根据硬件提供Wifi、本机名称、图像显示、音频输出、蓝牙配对、输入法、语言、时间等设置。
本机设置应用，应提供API接口供应用浏览器使用，以便在应用浏览器中设置本机功能。

==== 消息服务应用
消息服务应用，用于在任何状态下弹出消息，其需要常驻内存，并提供用户操作选项。
用户操作选项可以是：

1. 指示应用浏览器跳转到URL
1. 跳转本机设置应用某一具体项目
1. 


==== 启动(升级)服务
启动(升级)服务，在OTT 终端加电后立即执行，应具备以下功能

1. 检查版本 
1. 更新系统
1. 上报本机状态


==== 本机应用管理服务
本机应用管理服务，配合消息服务，与应用浏览器，提供：

1. 下载本机应用
1. 检查应用


==== 流化应用*

流化应用为可选,流化应用应具备以下功能要点

1. 与应用浏览器互操作
1. 与本机设置互操作
